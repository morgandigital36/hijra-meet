Nama konsep: WebRTC Webinar Platform (Google Meetâ€“like, Gratis)
Skala: 250 peserta
Mode: Webinar interaktif
Kamera aktif: max 20
Login peserta: âŒ tidak perlu
Rekaman: âœ… lokal device (host)


ğŸ§± TECHNOLOGY STACK (FINAL)
ğŸ¥ Video & Realtime Media
Cloudflare Call
WebRTC SFu
Kamera langsung browser
Free tier (1 TB / bulan)







ğŸ§  Backend (Interaksi & State)
Supabase
Realtime DB (WebSocket)
Anonymous access
Voting, Q&A, presence


ğŸ§‘â€ğŸ’» Frontend
React
Vite

ğŸ’» Client
Browser (Chrome / Edge / Firefox
MediaRecorder API (rekaman lokal)

ğŸ§  ARSITEKTUR GLOBAL

HOST (Login)

 â”œâ”€ Camera & Mic (Browser)

 â”œâ”€ Cloudflare Calls (Publish)

 â””â”€ Local Recording (MediaRecorder)



PESERTA (No Login)

 â”œâ”€ View Video (Subscribe)

 â”œâ”€ Voting

 â”œâ”€ Q&A

 â””â”€ Presence



DATA

 â”œâ”€ Supabase Realtime

 â””â”€ Anonymous Access





---



ğŸ”„ DETAIL WORKFLOW (END-TO-END)



1ï¸âƒ£ Pre-Event (Persiapan)



Admin buat Event ID



Set:



Max camera = 20



Mode default = view-only





Generate URL:





/event/{event_id}





---



2ï¸âƒ£ Host Join (Login)



Host login (Supabase Auth)



Browser:



getUserMedia()



Publish stream ke Cloudflare Calls





Host otomatis:



Kamera ON



Mic ON



Recording available









---



3ï¸âƒ£ Peserta Join (Tanpa Login)



Buka link event



Browser:



TIDAK publish media



Subscribe stream host





Status:



Kamera OFF



Mic OFF



View-only









---



4ï¸âƒ£ Raise Hand â†’ ON CAM (Peserta Terbatas)



Peserta klik Raise Hand



Request masuk Supabase



Moderator approve



Sistem cek:





if (active_camera < 20) allow

else reject



Kamera peserta aktif



Setelah selesai â†’ kembali view-only







---



5ï¸âƒ£ Interaksi Realtime



Voting



Insert vote (anonymous)



Realtime update via Supabase channel





Q&A



Peserta submit pertanyaan



Moderator approve / pin







---



6ï¸âƒ£ Recording (Host Only)



MediaRecorder aktif



Rekam:



Video stage



Audio host & active speakers





File .webm tersimpan ke device host







---



7ï¸âƒ£ End Event



Stop recording



Cloudflare Calls disconnect



Supabase channel close







---



ğŸ§© CORE FEATURES (WAJIB)



ğŸ¥ Video



[x] WebRTC browser camera



[x] Max 20 active camera



[x] Dynamic speaker switch



[x] Screen share (host only)





ğŸ”Š Audio



[x] Default mute peserta



[x] Moderator unmute



[x] Echo cancellation





ğŸ—³ï¸ Interaksi



[x] Voting realtime



[x] Q&A moderation



[x] Raise hand



[x] Presence counter





ğŸ“¼ Recording



[x] Local recording



[x] Manual start/stop



[x] Split per session





ğŸ” Control & Safety



[x] No login peserta



[x] Token-based event URL



[x] Rate limit voting



[x] Max publisher guard







---



ğŸ—‚ï¸ STRUKTUR PROJECT (REACT + VITE)



src/

 â”œâ”€ components/

 â”‚   â”œâ”€ VideoStage.jsx

 â”‚   â”œâ”€ RaiseHand.jsx

 â”‚   â”œâ”€ VotePanel.jsx

 â”‚   â”œâ”€ QnA.jsx

 â”‚   â”œâ”€ Recorder.jsx

 â”‚   â””â”€ ParticipantCount.jsx

 â”‚

 â”œâ”€ pages/

 â”‚   â”œâ”€ Event.jsx

 â”‚   â””â”€ Host.jsx

 â”‚

 â”œâ”€ lib/

 â”‚   â”œâ”€ cloudflareCalls.js

 â”‚   â”œâ”€ supabaseClient.js

 â”‚   â””â”€ webrtcUtils.js

 â”‚

 â””â”€ App.jsx





---



ğŸ—ƒï¸ SUPABASE DATA MODEL (MINIMAL)



events



id



title



max_camera



status





presence



event_id



session_id



joined_at





votes



event_id



option_id



client_id





questions



event_id



text



approved (bool)





> Semua table pakai RLS anonymous insert only









---



ğŸ“… DEVELOPMENT PLANNER (REALISTIS)



ğŸŸ¢ PHASE 1 â€” Core (5â€“7 hari)



React + Vite setup



Cloudflare Calls basic



View-only peserta



Host publish camera





ğŸŸ¡ PHASE 2 â€” Interaksi (5 hari)



Supabase realtime



Voting



Q&A



Presence





ğŸŸ  PHASE 3 â€” Advanced (4â€“6 hari)



Raise hand



Camera limit logic



Recording local



UI polish





ğŸ”µ PHASE 4 â€” Stabilization (3 hari)



Load test



Error handling



SOP host